package org.apache.jsp;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import org.apache.commons.io.FileUtils;
import java.io.File;
import java.util.List;
import java.sql.*;

public final class vista_005fdatos_005falum_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final JspFactory _jspxFactory = JspFactory.getDefaultFactory();

  private static java.util.List<String> _jspx_dependants;

  private org.glassfish.jsp.api.ResourceInjector _jspx_resourceInjector;

  public java.util.List<String> getDependants() {
    return _jspx_dependants;
  }

  public void _jspService(HttpServletRequest request, HttpServletResponse response)
        throws java.io.IOException, ServletException {

    PageContext pageContext = null;
    HttpSession session = null;
    ServletContext application = null;
    ServletConfig config = null;
    JspWriter out = null;
    Object page = this;
    JspWriter _jspx_out = null;
    PageContext _jspx_page_context = null;

    try {
      response.setContentType("text/html;charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;
      _jspx_resourceInjector = (org.glassfish.jsp.api.ResourceInjector) application.getAttribute("com.sun.appserv.jsp.resource.injector");

      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("<html>\n");
      out.write("    <head>\n");
      out.write("        <link rel=\"shortcut icon\" href=\"img/pesta1.ico\"/>\n");
      out.write("        <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n");
      out.write("        <title>JSP Page</title>\n");
      out.write("        <script>\n");
      out.write("            function cambi(){\n");
      out.write("                var aux1=\"previa\",aux2=\"Ruta\";\n");
      out.write("                document.getElementById(aux1).src=document.getElementById(aux2).value;\n");
      out.write("                \n");
      out.write("                clearInterval(cambio);\n");
      out.write("            }\n");
      out.write("            function SpawnContacto(){\n");
      out.write("                R = TipoContacto.options[TipoContacto.selectedIndex].value;\n");
      out.write("                if( R ===\"1\"  || R === \"2\"  ||  R ===\"3\" ){\n");
      out.write("                    document.getElementById(\"Contacto\").placeholder = \"(55) 5555 5555\";\n");
      out.write("                    document.getElementById(\"Contacto\").maxlength = \"15\";\n");
      out.write("                }\n");
      out.write("                else{\n");
      out.write("                    document.getElementById(\"Contacto\").placeholder = \"Ejemplo1@GoldenCode.com\";\n");
      out.write("                }\n");
      out.write("                document.getElementById(\"Contacto\").disabled = false;\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            function Desactivar(){\n");
      out.write("                Sexo.options[0].disabled = true;\n");
      out.write("                TipoContacto.options[0].disabled = true;\n");
      out.write("                AlumEstado.options[0].disabled = true;\n");
      out.write("                Escuela.options[0].disabled = true;\n");
      out.write("                Grupo.options[0].disabled = true;\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            function Validar(){\n");
      out.write("                var letras = \" abcdefghijklmnñopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n");
      out.write("                var x = event.keyCode;\n");
      out.write("                var letra = String.fromCharCode(x);\n");
      out.write("                var n = letras.indexOf(letra);\n");
      out.write("                if(n===-1)\n");
      out.write("                    event.returnValue = false;\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            function Validar2(){\n");
      out.write("                var letras = \" 1234567890\";\n");
      out.write("                var x = event.keyCode;\n");
      out.write("                var letra = String.fromCharCode(x);\n");
      out.write("                var n = letras.indexOf(letra);\n");
      out.write("                if(n===-1)\n");
      out.write("                    event.returnValue = false;\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            function Validar3(){\n");
      out.write("                var letras = \"abcdefghijklmnñopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ 1234567890\";\n");
      out.write("                var x = event.keyCode;\n");
      out.write("                var letra = String.fromCharCode(x);\n");
      out.write("                var n = letras.indexOf(letra);\n");
      out.write("                if(n===-1)\n");
      out.write("                    event.returnValue = false;\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            function Validar4(){\n");
      out.write("                var letras = \"-.,_{}[]´+¿'?!¡@#$%&/abcdefghijklmnñopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ 1234567890\";\n");
      out.write("                var x = event.keyCode;\n");
      out.write("                var letra = String.fromCharCode(x);\n");
      out.write("                var n = letras.indexOf(letra);\n");
      out.write("                if(n===-1)\n");
      out.write("                    event.returnValue = false;\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            function prevista(imagen) {\n");
      out.write("                if (imagen.files && imagen.files[0]) {\n");
      out.write("                    var reader = new FileReader();\n");
      out.write("                    reader.onload = function (e) {\n");
      out.write("                        document.getElementById(\"previa\").src=e.target.result;\n");
      out.write("                    }\n");
      out.write("                    reader.readAsDataURL(imagen.files[0]);\n");
      out.write("                }\n");
      out.write("                document.getElementById(\"previa\").style.visibility=\"visible\";\n");
      out.write("                document.getElementById(\"previa\").style.width=\"30%\";\n");
      out.write("                document.getElementById(\"previa\").style.heigth=\"30%\"\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            function Mayus(){\n");
      out.write("                var tecla = document.getElementById(\"Curp1\").value;\n");
      out.write("                var tecla2 = tecla.toUpperCase();\n");
      out.write("                document.getElementById(\"Curp1\").value = tecla2;\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("             function Mayus2(){\n");
      out.write("                var tecla = document.getElementById(\"ApPaterno\").value;\n");
      out.write("                var tecla2 = tecla.toUpperCase();\n");
      out.write("                document.getElementById(\"ApPaterno\").value = tecla2;\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            function Mayus3(){\n");
      out.write("                var tecla = document.getElementById(\"ApMaterno\").value;\n");
      out.write("                var tecla2 = tecla.toUpperCase();\n");
      out.write("                document.getElementById(\"ApMaterno\").value = tecla2;\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            function Mayus4(){\n");
      out.write("                var tecla = document.getElementById(\"Nombre\").value;\n");
      out.write("                var tecla2 = tecla.toUpperCase();\n");
      out.write("                document.getElementById(\"Nombre\").value = tecla2;\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            function Mayus5(){\n");
      out.write("                var tecla = document.getElementById(\"AlumCalle\").value;\n");
      out.write("                var tecla2 = tecla.toUpperCase();\n");
      out.write("                document.getElementById(\"AlumCalle\").value = tecla2;\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            function Mayus6(){\n");
      out.write("                var tecla = document.getElementById(\"AlumMunicipio\").value;\n");
      out.write("                var tecla2 = tecla.toUpperCase();\n");
      out.write("                document.getElementById(\"AlumMunicipio\").value = tecla2;\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            function AceptarDatos(){\n");
      out.write("                var nom = document.getElementById(\"Nombre\").value;\n");
      out.write("                var ApPat = document.getElementById(\"ApPaterno\").value;\n");
      out.write("                var ApMat = document.getElementById(\"ApMaterno\").value;\n");
      out.write("                var FechNaci = document.getElementById(\"FechaNacimiento\").value;\n");
      out.write("                var CURP = document.getElementById(\"Curp1\").value;\n");
      out.write("                var sexo = document.getElementById(\"Sexo\").value;\n");
      out.write("                var TContac = document.getElementById(\"TipoContacto\").value;\n");
      out.write("                var Contac = document.getElementById(\"Contacto\").value;\n");
      out.write("                var ANumExt =  document.getElementById(\"AlumNumExt\").value;\n");
      out.write("                var ACalle = document.getElementById(\"AlumCalle\").value;\n");
      out.write("                var AMunici =  document.getElementById(\"AlumMunicipio\").value;\n");
      out.write("                var AEstado = document.getElementById(\"AlumEstado\").value;\n");
      out.write("                var Usuar = document.getElementById(\"Usuario\").value;\n");
      out.write("                var Contra = document.getElementById(\"Contrasenia\").value;\n");
      out.write("                var ConfContra = document.getElementById(\"ConfContrasenia\").value;\n");
      out.write("                var Esc = document.getElementById(\"Escuela\").value;\n");
      out.write("                var Grup = document.getElementById(\"Grupo\").value;\n");
      out.write("                var foto = document.getElementById(\"imagen\").value;\n");
      out.write("                var check = 0;\n");
      out.write("                \n");
      out.write("                if(nom === \"\"){\n");
      out.write("                    alert(\"Completa el campo Nombre\");\n");
      out.write("                    document.getElementById(\"Nombre\").focus();\n");
      out.write("                    check++;\n");
      out.write("                }\n");
      out.write("                else\n");
      out.write("                    if(ApPat === \"\"){\n");
      out.write("                        alert(\"Completa el campo Apellido Paterno\");\n");
      out.write("                        document.getElementById(\"ApPaterno\").focus();\n");
      out.write("                        check++;\n");
      out.write("                    }\n");
      out.write("                    else\n");
      out.write("                        if(ApMat === \"\"){\n");
      out.write("                            alert(\"Completa el campo Apellido Materno\");\n");
      out.write("                            document.getElementById(\"ApMaterno\").focus();\n");
      out.write("                            check++;\n");
      out.write("                        }\n");
      out.write("                        else\n");
      out.write("                            if(FechNaci === \"\"){\n");
      out.write("                                alert(\"Completa el campo Fecha de Nacimiento\");\n");
      out.write("                                document.getElementById(\"FechaNacimiento\").focus();\n");
      out.write("                                check++;\n");
      out.write("                            }\n");
      out.write("                            else\n");
      out.write("                                if(CURP === \"\" || CURP.length < 18){\n");
      out.write("                                    alert(\"Completa el campo CURP\");\n");
      out.write("                                    document.getElementById(\"Curp1\").focus();\n");
      out.write("                                    check++;\n");
      out.write("                                }\n");
      out.write("                                else\n");
      out.write("                                    if(sexo === \"OpcSexo\"){\n");
      out.write("                                        alert(\"Completa el campo Sexo\");\n");
      out.write("                                        document.getElementById(\"Sexo\").focus();\n");
      out.write("                                        check++;\n");
      out.write("                                    }\n");
      out.write("                                    else\n");
      out.write("                                        if(TContac === \"OpcContacto\"){\n");
      out.write("                                            alert(\"Completa el campo Tipo de contacto\");\n");
      out.write("                                            document.getElementById(\"TipoContacto\").focus();\n");
      out.write("                                            check++;\n");
      out.write("                                        }\n");
      out.write("                                        else\n");
      out.write("                                            if(Contac === \"\"){\n");
      out.write("                                                alert(\"Completa el campo Contacto\");\n");
      out.write("                                                document.getElementById(\"Contacto\").focus();\n");
      out.write("                                                check++;\n");
      out.write("                                            }\n");
      out.write("                                            else\n");
      out.write("                                                if(ANumExt === \"\"){\n");
      out.write("                                                    alert(\"Completa el campo Numero exterior\");\n");
      out.write("                                                    document.getElementById(\"AlumNumExt\").focus();\n");
      out.write("                                                    check++;\n");
      out.write("                                                }\n");
      out.write("                                                else\n");
      out.write("                                                    if(ACalle === \"\"){\n");
      out.write("                                                        alert(\"Completa el campo Calle\");\n");
      out.write("                                                        document.getElementById(\"AlumCalle\").focus();\n");
      out.write("                                                        check++;\n");
      out.write("                                                    }\n");
      out.write("                                                    else\n");
      out.write("                                                        if(AMunici === \"\"){\n");
      out.write("                                                            alert(\"Completa el campo Municipio\");\n");
      out.write("                                                            document.getElementById(\"AlumMunicipio\").focus();\n");
      out.write("                                                            check++;\n");
      out.write("                                                        }\n");
      out.write("                                                        else\n");
      out.write("                                                            if(AEstado === \"0\"){\n");
      out.write("                                                                alert(\"Completa el campo Estado\");\n");
      out.write("                                                                document.getElementById(\"AlumEstado\").focus();\n");
      out.write("                                                                check++;\n");
      out.write("                                                            }\n");
      out.write("                                                            else\n");
      out.write("                                                                if( Usuar === \"\"){\n");
      out.write("                                                                    alert(\"Completa el campo Usuario\");\n");
      out.write("                                                                    document.getElementById(\"Usuario\").focus();\n");
      out.write("                                                                    check++;\n");
      out.write("                                                                }\n");
      out.write("                                                                else\n");
      out.write("                                                                    if( Contra === \"\"){\n");
      out.write("                                                                        alert(\"Completa el campo Contraseña\");\n");
      out.write("                                                                        document.getElementById(\"Contrasenia\").focus();\n");
      out.write("                                                                        check++;\n");
      out.write("                                                                    }\n");
      out.write("                                                                    else\n");
      out.write("                                                                        if( ConfContra === \"\"){\n");
      out.write("                                                                            alert(\"Completa el campo Confirmar Contraseña\");\n");
      out.write("                                                                            document.getElementById(\"ConfContrasenia\").focus();\n");
      out.write("                                                                            check++;\n");
      out.write("                                                                        }\n");
      out.write("                                                                        else\n");
      out.write("                                                                            if( foto === \"\"){\n");
      out.write("                                                                                alert(\"Completa el campo Foto\");\n");
      out.write("                                                                                document.getElementById(\"imagen\").focus();\n");
      out.write("                                                                                check++;\n");
      out.write("                                                                            }\n");
      out.write("                                                                            else\n");
      out.write("                                                                                if( Esc === \"0\"){\n");
      out.write("                                                                                    alert(\"Completa el campo Escuela\");\n");
      out.write("                                                                                    document.getElementById(\"Escuela\").focus();\n");
      out.write("                                                                                    check++;\n");
      out.write("                                                                                }\n");
      out.write("                                                                                else\n");
      out.write("                                                                                    if(Grup === \"0\"){\n");
      out.write("                                                                                        alert(\"Completa el campo Grupo\");\n");
      out.write("                                                                                        document.getElementById(\"Grupo\").focus();\n");
      out.write("                                                                                        check++;\n");
      out.write("                                                                                    }\n");
      out.write("                                                                                    else\n");
      out.write("                                                                                        if(Contra !== ConfContra){\n");
      out.write("                                                                                            alert(\"Las contrasenias no coinciden\");\n");
      out.write("                                                                                            document.getElementById(\"Contrasenia\").focus();\n");
      out.write("                                                                                            check++;\n");
      out.write("                                                                                        }\n");
      out.write("                                                                                                      \n");
      out.write("                                                                                                            \n");
      out.write("                if(check === 0){\n");
      out.write("                    var result = confirm(\"¿Desea dar de alta este registro?\");\n");
      out.write("                    if(result === true){\n");
      out.write("                        document.getElementById(\"DatosAlum\").submit();\n");
      out.write("                    }\n");
      out.write("                    else{\n");
      out.write("                        alert(\"Registro cancelado\");\n");
      out.write("                    }\n");
      out.write("                    \n");
      out.write("                    if(opcion ===  true){\n");
      out.write("                        document.getElementById(\"Nombre\").value = \"\";\n");
      out.write("                        document.getElementById(\"ApPaterno\").value = \"\";\n");
      out.write("                        document.getElementById(\"ApMaterno\").value = \"\";\n");
      out.write("                        document.getElementById(\"FechaNacimiento\").value = \"\";\n");
      out.write("                        document.getElementById(\"Curp1\").value = \"\";\n");
      out.write("                        document.getElementById(\"Sexo\").selectedIndex = null;\n");
      out.write("                        document.getElementById(\"TipoContacto\").selectedIndex = null;\n");
      out.write("                        document.getElementById(\"Contacto\").value = \"\";\n");
      out.write("                        document.getElementById(\"AlumNumExt\").value = \"\";\n");
      out.write("                        document.getElementById(\"AlumCalle\").value = \"\";\n");
      out.write("                        document.getElementById(\"AlumMunicipio\").value = \"\";\n");
      out.write("                        document.getElementById(\"AlumEstado\").selectedIndex = null;\n");
      out.write("                        document.getElementById(\"Usuario\").value = \"\";\n");
      out.write("                        document.getElementById(\"Contrasenia\").value = \"\";\n");
      out.write("                        document.getElementById(\"ConfContrasenia\").value = \"\";\n");
      out.write("                        document.getElementById(\"Escuela\").selectedIndex = null;\n");
      out.write("                        document.getElementById(\"Grupo\").selectedIndex = null;\n");
      out.write("                        document.getElementById(\"Turno\").value = \"\";\n");
      out.write("                        document.getElementById(\"imagen\").value = null;\n");
      out.write("                    }\n");
      out.write("                }\n");
      out.write("            }\n");
      out.write("            function Agregar(){\n");
      out.write("                var esc = document.getElementById(\"Escuela\").selectedIndex;\n");
      out.write("                if(esc === 1 || esc === 2 || esc === 5 || esc === 10){\n");
      out.write("                    document.getElementById(\"Grupo\").disabled = false;\n");
      out.write("                    grupos = [\"1IM1\",\"1IM2\",\"1IM3\"];\n");
      out.write("                    for( i = 0; i < grupos.length;i++)\n");
      out.write("                        Grupo.options[i+1] = new Option(grupos[i]);\n");
      out.write("                }\n");
      out.write("                else\n");
      out.write("                    if(esc === 3 || esc === 6 || esc === 8){\n");
      out.write("                        document.getElementById(\"Grupo\").disabled = false;\n");
      out.write("                        grupos = [\"1IC1\",\"1IC2\",\"1IC3\"];\n");
      out.write("                        for( i = 0; i < grupos.length;i++)\n");
      out.write("                            Grupo.options[i+1] = new Option(grupos[i]);\n");
      out.write("                    }\n");
      out.write("                    else\n");
      out.write("                        if(esc === 4 || esc === 7 || esc === 9){\n");
      out.write("                            document.getElementById(\"Grupo\").disabled = false;\n");
      out.write("                            grupos = [\"1IM1\",\"1IM2\",\"1IM3\",\"1IV1\",\"1IV2\",\"1IV3\"];\n");
      out.write("                            for( i = 0; i < grupos.length;i++)\n");
      out.write("                                Grupo.options[i+1] = new Option(grupos[i]);\n");
      out.write("                        }\n");
      out.write("                \n");
      out.write("            }\n");
      out.write("            function borrar(){\n");
      out.write("                Grupo.options[0].disabled = false;\n");
      out.write("                Turno.value = \"\";\n");
      out.write("                var contador = 0;\n");
      out.write("                var cuantos = Grupo.length;\n");
      out.write("                for(contador = 1; contador<=cuantos; contador++)\n");
      out.write("                    Grupo.options[1] = null;\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            function desplegarfecha(){\n");
      out.write("                alert(document.getElementById(\"FechaNacimiento\").value);\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            function ActiTurno(){\n");
      out.write("                var grup = Grupo.options[Grupo.selectedIndex].value;\n");
      out.write("                if(grup === \"1IM1\" || grup === \"1IM2\" || grup === \"1IM3\"){\n");
      out.write("                    Turno.value = \"1\";\n");
      out.write("                }\n");
      out.write("                else\n");
      out.write("                    if(grup === \"1IV1\" || grup === \"1IV2\" || grup === \"1IV3\"){\n");
      out.write("                        Turno.value = \"2\";\n");
      out.write("                    }\n");
      out.write("                    else\n");
      out.write("                        if(grup === \"1IC1\" || grup === \"1IC2\" || grup === \"1IC3\"){\n");
      out.write("                            Turno.value = \"3\";\n");
      out.write("                        }\n");
      out.write("            }\n");
      out.write("        </script>\n");
      out.write("        <link rel=\"stylesheet\" type=\"text/css\" href=\"formulario.css\">\n");
      out.write("        <link rel=\"stylesheet\" type=\"text/css\" href=\"https://fonts.googleapis.com/css?family=Quicksand\">\n");
      out.write("    </head>\n");
      out.write("    <body onload=\"cambio=setInterval('cambi()',3000)\">\n");
      out.write("        ");

            Connection con=null;
            PreparedStatement sta;
            ResultSet resul=null;
            File archivo=null;
            List fileItems=null;
            HttpSession sesion=request.getSession();
            try {
                Class.forName("com.mysql.jdbc.Driver").newInstance();
                con=DriverManager.getConnection("jdbc:mysql://localhost/Proyecto","root","n0m3l0");
            }
            catch(SQLException error) {
                out.println(error.toString());
            }
            try{
                sta=con.prepareStatement("select Foto.Archivo as Foto,Foto.Nombre as Nombre_Foto,Datos_Cuenta.Usuario as Usuario,Datos_Cuenta.Contraseña as Contra,Direccion.Numero_Exterior as NE_Alum,Direccion.Calle as Calle_Alum,Direccion.Municipio as Muni_Alum,Direccion.Id_Estado as Id_Estado_Alum,Datos_Usuario.Apellido_Paterno as ApellidoP,Datos_Usuario.Apellido_Materno as ApellidoM,Datos_Usuario.Nombre as Nombre_Alum,Datos_Usuario.Fecha_Nacimiento as Fecha,Datos_Usuario.Id_Sexo as Id_Sexo_Alum,Alumno.Curp as Curp,Alumno.Id_Grupo as Id_Grupo_Alum,Alumno.Id_Escuela as Id_Escuela_Alum,Contacto.Id_TContacto as Id_TContac,Contacto.Descripcion as Contacto from Foto inner join Datos_Cuenta,Direccion,Datos_Usuario,Alumno,Contacto,Relacion_Usuario_Contacto where Datos_Usuario.Id_Foto=Foto.Id_Foto and Datos_Usuario.Id_Datos_Usuario=Alumno.Id_Datos_Usuario and Datos_Usuario.Id_Direccion=Direccion.Id_Direccion and Contacto.Id_Contacto=Relacion_Usuario_Contacto.Id_Contacto and Relacion_Usuario_Contacto.Id_Datos_Usuario=Datos_Usuario.Id_Datos_Usuario and Datos_Usuario.Id_Datos_Cuenta=Datos_Cuenta.Id_Datos_Cuenta and Datos_Cuenta.Id_Datos_Cuenta=?;");
                sta.setInt(1, (int)(sesion.getAttribute("Id")));
                resul=sta.executeQuery();
                if(resul.next()){
                    out.println("<div>");
                    out.println("<center><h1>Bienvenido Alumno</h1></center>");
                    out.println("<h3>Complete todos los campos para continuar</h3>");
                    out.println("</div>");
                    out.println("<div>");
                    out.println("<form action='actualizar_alumno.jsp' method='post' id='DatosAlum' name='DatosAlum' enctype='multipart/form-data'>");
                    out.println("<fieldset>");
                    out.println("<legend>Datos Personales</legend>");
                    out.println("Nombre(s): <input type='text' name='Nombre' id='Nombre' onkeypress='Validar()' placeholder='Nombre' onkeyup='Mayus4()' maxlength='50' value='"+resul.getString("Nombre_Alum")+"'>");
                    out.println("Apellido Paterno: <input type='text' name='ApPaterno' id='ApPaterno' onkeypress='Validar()' placeholder='Apellido Paterno' onkeyup='Mayus2()' maxlength='30' value='"+resul.getString("ApellidoP")+"'>");
                    out.println("Apellido Materno: <input type='text' name='ApMaterno' id='ApMaterno' onkeypress='Validar()' placeholder='Apellido Materno' onkeyup='Mayus3()' maxlength='30' value='"+resul.getString("ApellidoM")+"'>");
                    out.println("Fecha de Nacimiento: <input type='date' name='FechaNacimiento' id='FechaNacimiento' max='2004-12-31' min='1950-12-31' value='"+resul.getDate("Fecha")+"'>");
                    out.println("Curp: <input type='text' name='Curp1' id='Curp1' onkeypress='Validar3()' maxlength='18' placeholder='CURP' onkeyup='Mayus();' value='"+resul.getString("Curp")+"'>");
                    out.println("<select id='Sexo' name='Sexo' onclick='Desactivar()'>");
                    out.println("<option  value='OpcSexo' > Sexo </option>");
                    out.println("<option  value='1' > Masculino </option>");
                    out.println("<option  value='2'> Femenino </option>");
                    out.println("</select>");
                    out.println("<select id='TipoContacto' name='TipoContacto' onchange='  SpawnContacto();' onclick='Desactivar()' >");
                    out.println("<option  value='OpcContacto' > Tipo de Contacto </option><option  value='1' > Telefono movil </option><option  value='2'> Telefono Casa </option><option  value='3'> Telefono Oficina </option><option  value='4'> E-mail </option>");
                    out.println("</select>");
                    out.println("<input type='text' id='Contacto' name='Contacto' disabled onkeypress='Validar4()' placeholder='Contacto' maxlength='30' value='"+resul.getString("Contacto")+"'>");
                    out.println("<fieldset>");
                    out.println("<legend>Direccion</legend>");
                    out.println("Numero Exterior: <input type='text' name='AlumNumExt' id='AlumNumExt' onkeypress='Validar2()' placeholder='Numero Exterior' maxlength='5' value='"+resul.getInt("NE_Alum")+"'>");
                    out.println("Calle: <input type='text' name='AlumCalle' id='AlumCalle' onkeyup='Mayus5()' onkeypress='Validar4()' placeholder='Calle' maxlength='60' value='"+resul.getString("Calle_Alum")+"'>");
                    out.println("Municipio: <input type='text' name='AlumMunicipio' id='AlumMunicipio' onkeyup='Mayus6()' onkeypress='Validar()' placeholder='Municipio' maxlength='30' value='"+resul.getString("Muni_Alum")+"'>");
                    out.println("<select id='AlumEstado' name='AlumEstado' onclick='Desactivar();'>");
                    out.println("<option  value='0' > Seleecione su Estado </option><option  value='1' > Ciudad de Mexico </option><option  value='2' > Aguascaliente </option><option  value='3' > Baja California </option><option  value='4' > Baja California Sur </option><option  value='5' > Campeche  </option><option  value='6' > Chihuahua </option><option  value='7' > Chiapas </option><option  value='8' > Coahuila  </option><option  value='9' > Colima </option><option  value='10' > Durango </option><option  value='11' > Guanajuato </option><option  value='12' > Guerrero </option><option  value='13' > Hidalgo </option><option  value='14' > Jalisco </option><option  value='15' > Estado de Mexico </option><option  value='16' > Michoacan </option><option  value='17' > Morelos </option><option  value='18' >  Nayarit</option><option  value='19' > Nuevo Leon </option><option  value='20' > Oaxaca </option><option  value='21' > Puebla </option><option  value='22' > Queretaro </option><option  value='23' > Quintana Roo </option><option  value='24' > San Luis Potosi </option><option  value='25' > Sinaloa  </option><option  value='26' > Sonora </option><option  value='27' > Tabasco </option><option  value='28' > Tamaulipas </option><option  value='29' > Tlaxcala </option><option  value='30' > Veracruz </option><option  value='31' > Yucatan </option><option  value='32' > Zacatecas </option>");
                    out.println("</select>");
                    out.println("</fieldset>");
                    out.println("</fieldset>");
                    out.println("<br>");
                    out.println("<fieldset>");
                    out.println("<legend> Datos Usuario</legend>");
                    out.println("Usuario: <input type='text' id='Usuario' name='Usuario' onkeypress='Validar4()' placeholder='Usuario' maxlength='30' value='"+resul.getString("Usuario")+"'>");
                    out.println("Contraseña <input type='password' id='Contrasenia' name='Contrasenia' onkeypress='Validar4()' placeholder='Contraseña' maxlength='20' value='"+resul.getString("Contra")+"'>");
                    out.println("Confirmar Contraseña <input type='password' id='ConfContrasenia' name='ConfContrasenia' onkeypress='Validar4()' placeholder='Confirmar Contraseña' maxlength='20' value='"+resul.getString("Contra")+"'>");
                    out.println("Foto de Perfil: <input accept='image/*' type='file' name='imagen' id='imagen' onchange='prevista(imagen)'>");
                    out.println("<br>");
                    ResultSet resul2=null;
                    sta=con.prepareStatement("select Foto.Id_Foto,Foto.Archivo,Foto.Nombre,Puntuacion.Cantidad from Foto inner join Datos_Cuenta,Datos_Usuario,Puntuacion,Alumno where Foto.Id_Foto=Datos_Usuario.Id_Foto and Datos_Usuario.Id_Datos_Cuenta=Datos_Cuenta.Id_Datos_Cuenta and Puntuacion.Id_Puntuacion=Alumno.Id_Puntuacion and Alumno.Id_Datos_Usuario=Datos_Usuario.Id_Datos_Usuario and Datos_Cuenta.Id_Datos_Cuenta=?;");
                    sta.setInt(1, (int)(sesion.getAttribute("Id")));
                    resul2=sta.executeQuery();
                    String aux=config.getServletContext().getRealPath("/");
                    String aux2="";
                    aux+="img/";
                    int aux3=0,aux4=0;
                    for (int i=0;i<aux.length();i++) {
                        if(aux.charAt(i)==92){
                            aux2+="/";
                        }
                        else{
                            aux2+=aux.charAt(i);
                        }
                    }
                    aux3=aux2.indexOf("/build");
                    aux4=aux3+6;
                    String aux5=aux2.substring(0, aux3)+aux.substring(aux4);
                    String filePath = aux5;
                    if(resul2.next()){
                        byte[] bytes=resul2.getBytes("Archivo");
                        FileUtils.writeByteArrayToFile(new File(filePath,resul2.getString("Nombre")), bytes);
                        archivo=new File(filePath+resul2.getString("Nombre"));
                        out.println("<input id='Ruta' value='"+("img/"+archivo.getName())+"' type='text' name='Ruta' style='visibility: hidden; top: 0px; left: 0px; position: absolute;'>");
                        out.println("<img id='previa' src='img/cargando.gif' style='width: 30%; heigth: 30%;'>");
                    }
                    out.println("</fieldset>");
                    out.println("<br>");
                    out.println("<fieldset>");
                    out.println("<legend>Datos Escolares</legend>");
                    ResultSet resul3=null;
                    sta=con.prepareStatement("select * from Escuela;");
                    resul3=sta.executeQuery();
                    out.println("<select id='Escuela' name='Escuela' onclick='Desactivar();' onchange='borrar(Grupo), Agregar();'>");
                    out.println("<option value='0'> Escuela </option>");
                    while(resul3.next()){
                        out.println("<option value='"+resul3.getInt("Id_Escuela")+"'>'"+resul3.getString("Nombre")+"'</option>");
                    }
                    out.println("</select>");
                    out.println("<select id='Grupo' name='Grupo' onclick='Desactivar()' onchange='ActiTurno()' disabled><option  value='0' > Grupo </option></select>");
                    out.println("<input type='text' id='Turno' name='Turno' style='visibility: hidden;'>");
                    out.println("</fieldset>");
                    out.println("<br>");
                    out.println("<input type='button' id='Aceptar' name='Aceptar' value='Aceptar' onclick='AceptarDatos();'>");
                    out.println("</form></div>");
                }
                out.println("");
                out.println("");
            }
            catch(SQLException e){
                out.println(e.getMessage());
            }
        
      out.write("\n");
      out.write("    </body>\n");
      out.write("</html>\n");
    } catch (Throwable t) {
      if (!(t instanceof SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          out.clearBuffer();
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
